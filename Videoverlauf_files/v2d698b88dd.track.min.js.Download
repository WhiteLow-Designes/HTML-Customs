function getParams(){for(var e={},t=document.location.search.substring(1).split("&"),n=0;n<t.length;n++)if(t[n]){var r=t[n].split("=");e[r[0]]=decodeURIComponent(r[1])}return e}var PRS={name:"prs",remove:function(){localStorage.removeItem(this.name)},set:function(e,t){if(e){if(void 0===t){var n=this.get(!0);t=n?n[1]:(new Date).getTime()+864e5}e=encodeURIComponent(e),localStorage.setItem(this.name,JSON.stringify([e,t]))}else this.remove()},get:function(e){var t,n=localStorage.getItem(this.name);if(!n)return null;try{t=JSON.parse(n)}catch(e){return this.remove(),null}return 2!==t.length?(this.remove(),null):isNaN(t[1])?(this.remove(),null):t[1]<(new Date).getTime()?(this.remove(),null):e?t:t[0]}};function isIframe(){try{return window.self!==window.top}catch(e){return!0}}function clearPrs(){var e=PRS.get(!1);e&&"-"!==e[0]&&PRS.remove()}function Track(e){var t=e.value,n=PRS.get(!1);if(!n&&t&&(PRS.set(t),n=t),n&&"--"!==n)if(isIframe())clearPrs();else{var r=getParams(),o=document.location.hostname.split(".").slice(-2).join("."),a=Date.now()+"."+Math.round(1e6*Math.random()),i=encodeURIComponent(document.referrer||""),c=e.counter?"&"+e.counter:"";if(r.utm_source&&r.utm_source.includes(".")&&!["embed","m_embed"].includes(r.utm_campaign)){var s=document.createElement("a");s.href="http://"+r.utm_source,i="http://"+s.hostname}!i&&r.utm_campaign&&r.utm_campaign.match(/^ai\.([a-zA-Z0-9]+)$/)&&(i="https://direct"),PRS.set("--"),fetch(["//cnt."+o+"/prs.php","?value=",n,"&rf=",i,"&srv=",encodeURIComponent(""+e.server),c,"&_=",a].join(""),{method:"GET",headers:{Accept:"application/json"}}).then(function(e){return e.json()}).then(function(e){e.hasOwnProperty("value")&&PRS.set(e.value)}).catch(function(e){})}}window.Track=Track;